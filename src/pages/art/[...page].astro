---
import type { GetStaticPaths } from 'astro';
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import PostCard from '../../components/PostCard.astro';
import Pagination from '../../components/Pagination.astro';
import { PAGINATION } from '../../consts';
import '../../styles/blog.scss';

export const getStaticPaths: GetStaticPaths = async ({ paginate }) => {
  const posts = await getCollection('posts', ({ data }) => !data.draft && data.category === 'art');
  const sortedPosts = posts.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
  return paginate(sortedPosts, { pageSize: PAGINATION.perPage });
};

const { page } = Astro.props;
---

<BaseLayout title="Art" category="art">
  <div>
    {page.data.length > 0 ? (
      page.data.map((post) => <PostCard post={post} />)
    ) : (
      <p>No posts yet in this category.</p>
    )}
    <Pagination page={page} />
  </div>
</BaseLayout>
